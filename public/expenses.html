<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="assets/images/logo2.PNG">
    <title>Davao Blue Eagle Scout - Cirva A La Gente Por La Musica</title>
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/plugins/font-awesome/css/all.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
    if (!localStorage.getItem("user")) {
        window.location.href = "login";
    }    

    document.addEventListener("DOMContentLoaded", function() {
    const currentUrl = window.location.href;
    const links = document.querySelectorAll('.accordion-menu a');

    links.forEach(link => {
        if (currentUrl.includes(link.getAttribute('href'))) {
            link.classList.add('active');
        }
    });
});


</script>

<style>
             select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    } 
</style>
    
    </head>
    <body>
        <div style="position: fixed;top: 0px;left: 0px;width: 100%;background: #F4F7FC;z-index: 9999;padding: 0px;">
  <div class="lime-sidebar">
    <div class="lime-sidebar-inner slimscroll">
      <ul class="accordion-menu">
        <li class="sidebar-title">Navigations</li>
        <li><a href="dashboard"><i class="material-icons">dashboard</i><span>Dashboard</span></a></li>
        <li><a href="events"><i class="material-icons">event</i><span>Events</span></a></li>
        
        <li><a href="revenues"><i class="material-icons">trending_up</i><span>Revenues</span></a></li>
        <li><a href="payments"><i class="material-icons">payment</i><span>Payments</span></a></li>
        <li><a href="expenses"><i class="material-icons">request_quote</i><span>Expenses</span></a></li>
        <li><a href="officers"><i class="material-icons">people</i><span>Officers</span></a></li>
        <li><a href="login_history"><i class="material-icons">schedule</i><span>Login History</span></a></li>
        <li><a href="summary"><i class="material-icons">bar_chart</i>Summary</a></li>
      </ul>
      <ul class="accordion-menu" id="Othersnav">
        <li class="divider"></li>
        <li class="sidebar-title">Others</li>
        <li><a onclick="localStorage.removeItem('user'); window.location.href = 'login';"><i class="material-icons">power_settings_new</i><span>Logout</span></a></li>
      </ul>
    </div>
  </div>

  <style>
    @media (max-width: 1024px) {
      #Othersnav {
        display: block;
      }
    }
    @media (min-width: 1025px) {
      #Othersnav {
        display: none;
      }
    }
  </style>

  <div class="lime-header" style="padding: 0px;">
    <nav class="navbar navbar-expand-lg">
      <section class="material-design-hamburger navigation-toggle">
        <a href="javascript:void(0)" class="button-collapse material-design-hamburger__icon">
          <span class="material-design-hamburger__layer"></span>
        </a>
      </section>
      <a class="navbar-brand" href="">
        <img src="assets/images/logo2.png" style="height: 75px;width: 75px;">
      </a>
      <button class="navbar-toggler" type="button"  style="margin-right: 10px" onclick="localStorage.removeItem('user'); window.location.href = 'login';">
        <i class="material-icons" style="font-size: 20px;">power_settings_new</i>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="material-icons">more_vert</i>
            </a>
            <ul class="dropdown-menu dropdown-menu-right">
              <li><a class="dropdown-item" onclick="localStorage.removeItem('user'); window.location.href = 'index.html';">Logout</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>

            

        <div class="lime-container">
            <div class="lime-body" style="margin-top:100px">
                <div class="container">


                        
                    <div class="row">

                        <div class="col">

                            <div class="card">
                                <div class="card-body">
                                      <h5 class="card-title" style="text-align: center;">(<span style="color:#07102F" id="totalRows"></span>) Expenses</h5>
    
                                    <div class="row">
<div class="col-12 col-md-12">
    <div class="todo-sidebar">
        <div class="row">
            <div class="col-12 col-md-6 mb-3">
                <div class="todo-new-task">
                    <button class="btn btn-primary btn-block" style="height:42px;" data-toggle="modal" data-target="#newUsers">Create New Expenses</button>
                </div>
            </div>

            <div class="col-12 col-md-6 mb-3">
                <div class="todo-search m-b-lg">
                        <div class="input-group">
                            <input type="text" id="search" class="form-control" placeholder="Search Expenses">
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>

                                        <div class="col-md-12">
                                              

                    <div class="row">
                        
                        <div class="col-md-6">
                            <div class="card stat-card">
                                <div class="card-body bg-info">
                                    <h5 class="card-title">Total Amount</h5>
                                    <h2 class="float-right" id="TotalAmount" style="color:white;"></h2>
                                    <p style="color:white;font-weight: bold;">PHP</p>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card stat-card">
                                <div class="card-body bg-success">
                                    <h5 class="card-title">Total Amount Given</h5>
                                    <h2 class="float-right" id="TotalAmountGiven" style="color:white;"></h2>
                                    <p style="color:white;font-weight: bold;">PHP</p>
                                    
                                </div>
                            </div>
                        </div>
                    </div>

<div class="card">
    <div class="card-body" style="padding: 0px;">
        <div class="table-responsive">
            <table class="table">
        <thead>
            <tr>
                
                <th>Date Encoded</th>
                <th>Event</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Date Used</th>
                <th>Amount Given</th>
                <th>Date Given</th>
                <th>Incharge</th>
                <th>Officer</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="expensesTableBody"></tbody>
    </table>

        </div>
    </div>
</div>








                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div class="modal fade" id="passwordConfirmModal" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index: 99999999;background: rgba(0, 0, 0, 0.5);">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm Deletion</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>
  Are you sure you want to delete this expense? <br>
  
  <em>All related data including revenues, expenses, payments, and records will also be deleted.</em>
</p>

                <div class="form-group">
                    <label for="deletePassword">To confirm, type your password below</label>
                    <input type="password" class="form-control" id="deletePassword" placeholder="Password">
                    <br>
                    <strong style="color:#FC6060">This action cannot be undone.</strong><br>
                </div>
                <div id="passwordError" class="text-danger" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="dummy_confirmDeleteBtn" disabled style="margin-right: -8px;">Delete</button>
                <form id="deleteForm">
                 <input type="hidden" id="idtodelete" name="idtodelete">
                <button type="submit" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </form>

                <script>

                     $(document).ready(function () {
    $('#deleteForm').on('submit', function (e) {
      e.preventDefault();

      const idToDelete = $('#idtodelete').val();

      if (!idToDelete) {
        alert('Please enter a valid ID.');
        return;
      }

     

      $.ajax({
                        url: `/deleteExpense/${idToDelete}`,
                        type: 'DELETE',
                        success: function (response) {
                            if (response.success) {
                                 alert("Deleted successfully!");
          window.location.reload();
                            } else {
                                alert("Error: " + response.message);
                            }
                        },
                        error: function () {
                            alert("An error occurred while deleting the expense.");
                        }
                    });




    });
  });


    setInterval(function () {
        const deletePassword = document.getElementById('deletePassword')?.value;
        const storedId = localStorage.getItem('logged_uniqueid');

        if (deletePassword === storedId) {
            document.getElementById('confirmDeleteBtn').style.display = 'block';
            document.getElementById('dummy_confirmDeleteBtn').style.display = 'none';
        } else {
            document.getElementById('confirmDeleteBtn').style.display = 'none';
            document.getElementById('dummy_confirmDeleteBtn').style.display = 'block';
        }
    }, 100); 
</script>

            </div>
        </div>
    </div>
</div>


            <div class="lime-footer">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <span class="footer-text">2025 © Davao Blue Eagle Scout</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        


        
<!-- Create New Expenses Modal -->
<div class="modal fade" id="newUsers" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index: 99999999;background: rgba(0, 0, 0, 0.5);">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New Expenses</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="material-icons">close</i>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="newdata">
                    

                    <div class="form-group" style="display: none;">
                        <label for="new_dateencoded">Date Encoded</label>
                        <input type="date" class="form-control" id="new_dateencoded" required>
                    </div>
                  


                    <div class="form-group">
                        <label for="new_eventtypeid">Event</label>
                        <select class="form-control" required id="new_eventtypeid">
                            <option value="" selected hidden>Select Event</option>
                        </select>
                    </div>

                    <script>
                          function fetchEvents() {
    $.ajax({
        url: "/getallavailableeventinexpenses",
        type: "GET",
        success: function (response) {
            let eventSelect = $("#new_eventtypeid");
            eventSelect.empty();
            eventSelect.append('<option value="" selected hidden>Select Event</option>');

            const today = new Date();
            today.setHours(0, 0, 0, 0); // Normalize to start of day

            response.forEach(event => {
                if (event.event_date) {
                    const eventDate = new Date(event.event_date);
                    eventDate.setDate(eventDate.getDate() + 1);

                    
                        const formattedDate = eventDate.toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });

                        eventSelect.append(
                            `<option value="${event.EventTypeID}">${event.EventName} (${formattedDate})</option>`
                        );
                        
                }
            });
            
        },
        error: function () {
            alert("Error fetching events");
        }
    });
}


        fetchEvents();

       function setPhilippineDate() {
    const now = new Date();
    const phDate = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Manila" }));

    const year = phDate.getFullYear();
    const month = String(phDate.getMonth() + 1).padStart(2, '0');
    const day = String(phDate.getDate()).padStart(2, '0');

    const formattedDate = `${year}-${month}-${day}`;
    document.getElementById("new_dateencoded").value = formattedDate;
}

document.addEventListener("DOMContentLoaded", setPhilippineDate);

                    </script>


                    <div class="form-group">
                        <label for="new_description">Description</label>
                        <input type="text" class="form-control" id="new_description" placeholder="Description">
                    </div>
                    <div class="form-group">
                        <label for="new_amount">Amount</label>
                        <input type="number" step="0.01" class="form-control" id="new_amount" placeholder="Amount" required>
                    </div>
                      <div class="form-group">
                        <label for="new_dategiven">Date Given</label>
                        <input type="date" class="form-control" id="new_dategiven" required>
                    </div>
                     <div class="form-group">
                        <label for="new_amountgiven">Amount Given</label>
                        <input type="number" step="0.01" class="form-control" id="new_amountgiven" placeholder="Amount Given" required>
                    </div>
                    <div class="form-group">
                        <label for="new_dateused">Date Used</label>
                        <input type="date" class="form-control" id="new_dateused" required>
                    </div>
                   
                  
                    <div class="form-group" style="display: none;">
                        <label for="new_officer">Officer</label>
                        <input class="form-control" required id="new_officer">
                        <script>
                            document.getElementById("new_officer").value = localStorage.getItem('logged_officerid')
                        </script>
                    </div>
                    
                    <div class="modal-footer" style="padding-right: 0px;">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add New Expense</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


    <div class="modal fade" id="editUsers" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index: 99999999;background: rgba(0, 0, 0, 0.5);">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Edit Expense</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="material-icons">close</i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <input type="hidden" id="editExpenseID">
                          <div class="form-group" >
                            <label for="edit_eventtypeid">Event</label>
                            <select class="form-control" required id="edit_eventtypeid">
                                <option value="" selected hidden>Select Event</option>
                            </select>
                        </div>

                        <div class="form-group" style="display: none;">
                            <label for="edit_dateencoded">Date Encoded</label>
                            <input type="date" class="form-control" id="edit_dateencoded" required>
                        </div>
                        <script>
                            function setPhilippineDate() {
    const now = new Date();
    const phDate = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Manila" }));

    const year = phDate.getFullYear();
    const month = String(phDate.getMonth() + 1).padStart(2, '0');
    const day = String(phDate.getDate()).padStart(2, '0');

    const formattedDate = `${year}-${month}-${day}`;
    document.getElementById("edit_dateencoded").value = formattedDate;
}

document.addEventListener("DOMContentLoaded", setPhilippineDate);
                        </script>
                        <div class="form-group">
                            <label for="edit_description">Description</label>
                            <input type="text" class="form-control" id="edit_description" placeholder="Description">
                        </div>
                        <div class="form-group">
                            <label for="edit_amount">Amount</label>
                            <input type="number" step="0.01" class="form-control" id="edit_amount" placeholder="Amount" required>
                        </div>
                        <div class="form-group">
                            <label for="edit_dategiven">Date Given</label>
                            <input type="date" class="form-control" id="edit_dategiven" required>
                        </div>
                          <div class="form-group">
                            <label for="edit_amountgiven">Amount Given</label>
                            <input type="number" step="0.01" class="form-control" id="edit_amountgiven" placeholder="Amount Given" required>
                        </div>
                        <div class="form-group">
                            <label for="edit_dateused">Date Used</label>
                            <input type="date" class="form-control" id="edit_dateused" required>
                        </div>
                      
                        
                        <div class="form-group" style="display: none;">
                            <label for="edit_officer">Officer</label>
                            <select class="form-control" required id="edit_officer">
                                <option value="" selected hidden>Select Officer</option>
                            </select>
                        </div>
                      
                        <div class="modal-footer" style="padding-right: 0px;">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    

    <script>
        $(document).ready(function () {
            // Fetch expenses data and populate the table
            $.get("/allexpenses", function (response) {
                if (response.status === "success") {
                    let rows = "";
                    let totalRows = 0;
                    let totalAmount = 0;
                    let totalAmountGiven = 0;
    
                    response.data.forEach(expense => {
                        const formatDate = (dateString) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
};

const formatDateplus1 = (dateString) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    date.setDate(date.getDate() + 1); // Add one day
    return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
};

    
                        totalRows++;
                        totalAmount += parseFloat(expense.Amount) || 0;
                        totalAmountGiven += parseFloat(expense.AmountGiven) || 0;
    
                        rows += `<tr>
                              <td>${formatDate(expense.DateEncoded)}</td>
                                    <td>${expense.EventName || ''}<br>${formatDateplus1(expense.event_date)} <br></td>
                                  
                                    <td>${expense.Description || ''}</td>
                                    <td>${expense.Amount}</td>
                                    <td>${formatDate(expense.DateUsed)}</td>
                                    <td>${expense.AmountGiven || ''}</td>
                                    <td>${formatDate(expense.DateGiven)}</td>
                                    <td>${expense.customer_incharge || ''}</td>
                                    
                                    <td>${expense.RoleDescription || ''} ${expense.PersonFirstName || ''} ${expense.PersonLastName || ''}</td>
                                    
                                    <td style="display:flex">
                                        <button class="btn btn-secondary btn-sm edit-btn mr-2"
                                            
                                                data-id="${expense.ExpenseID}"
                                                data-eventdate="${formatDate(expense.event_date)}"
                                                data-eventname="${expense.EventName}"
                                                data-description="${expense.Description}"
                                                data-amount="${expense.Amount}"
                                                data-dateused="${expense.DateUsed}"
                                                data-amountgiven="${expense.AmountGiven}"
                                                data-dategiven="${expense.DateGiven}"
                                                data-officerid="${expense.OfficerID}"
                                                data-eventid="${expense.EventTypeID}">
                                            Edit
                                        </button>
                                        <button class="btn btn-danger btn-sm delete-btn"
                                                data-id="${expense.ExpenseID}">
                                            Delete
                                        </button>
                                    </td>
                                </tr>`;
                    });
    
                    $("#expensesTableBody").html(rows);
                    $('#totalRows').text(totalRows);
                    $('#TotalAmount').text(totalAmount.toFixed(2));
                    $('#TotalAmountGiven').text(totalAmountGiven.toFixed(2));
                } else {
                    alert("Error fetching expenses: " + response.message);
                }
            });
    // Search Functionality
$("#search").on("keyup", function () {
    const searchTerm = $(this).val().toLowerCase();
    
    $("#expensesTableBody tr").filter(function () {
        $(this).toggle($(this).text().toLowerCase().indexOf(searchTerm) > -1);
    });
});
            // Fetch and Populate Officer Dropdown
            function fetchOfficers() {
                $.get("/get-officers", function (data) {
                    const officerDropdown = $("#new_officer, #edit_officer");
                    officerDropdown.empty().append('<option value="" selected hidden>Select Officer</option>');
                    data.forEach(officer => {
                        officerDropdown.append(`<option value="${officer.PersonID}">${officer.FirstName} ${officer.LastName}</option>`);
                    });
                });
            }
    
            fetchOfficers(); // Call to populate officer dropdowns
    
        
            // Edit Expense Button Click
          $(document).on('click', '.edit-btn', function () {
    // Set input values from button data attributes
    $("#editExpenseID").val($(this).data("id"));
    $("#edit_description").val($(this).data("description"));
    $("#edit_amount").val($(this).data("amount"));

    let rawDate = $(this).data("dateused");
    if (rawDate) {
        let dateOnly = rawDate.split('T')[0];
        $("#edit_dateused").val(dateOnly);
    }

    $("#edit_amountgiven").val($(this).data("amountgiven"));

    let rawDate2 = $(this).data("dategiven");
    if (rawDate2) {
        let dateOnly2 = rawDate2.split('T')[0];
        $("#edit_dategiven").val(dateOnly2);
    }

    $("#edit_officer").val($(this).data("officerid"));
    let selectedEventID = $(this).data("eventid");


    let selectedEventName = $(this).data("eventname"); // Make sure you set this in your data attributes
    let selectedEventDate = $(this).data("eventdate"); // Also ensure this is present


    let eventSelect = $("#edit_eventtypeid");
    eventSelect.empty(); // Clear previous options

    // Add the selected/hidden event as the first option
    if (selectedEventID && selectedEventName) {
        

        eventSelect.append(`
            <option value="${selectedEventID}" selected hidden>
                ${selectedEventName} (${selectedEventDate}) 
            </option>
        `);
    }


    $.ajax({
        url: "/getallavailableeventinexpenses",
        type: "GET",
        success: function (response) {
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            response.forEach(event => {
                if (event.event_date) {
                    const eventDate = new Date(event.event_date);
                    eventDate.setHours(0, 0, 0, 0);

                    // Avoid re-adding the selected one
                    if (event.EventTypeID != selectedEventID) {
                        const formattedDate = eventDate.toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });

                        eventSelect.append(`
                            <option value="${event.EventTypeID}">
                                ${event.EventName} (${formattedDate})
                            </option>
                        `);
                    }
                }
            });
        },
        error: function () {
            alert("Error fetching events");
        }
    });

    // Show the modal
    $('#editUsers').modal('show');
});











    
            // Delete Expense Button Click
            $(document).on('click', '.delete-btn', function () {
                const expenseId = $(this).data("id");
     document.getElementById('idtodelete').value = expenseId;

    $('#passwordConfirmModal').modal('show');
            });
    
            // New Expense Form Submission
            $('#newdata').submit(function (event) {
                event.preventDefault();
    
                // Collect form data
                const formData = {
                    DateEncoded: $('#new_dateencoded').val(),
                    Description: $('#new_description').val(),
                    Amount: $('#new_amount').val(),
                    DateUsed: $('#new_dateused').val(),
                    AmountGiven: $('#new_amountgiven').val(),
                    DateGiven: $('#new_dategiven').val(),
                    OfficerID: $('#new_officer').val(),
                    EventID: $('#new_eventtypeid').val(),
                };
    
                // Debugging: Log the form data before sending
                console.log("Submitting New Expense:", formData);
    
                // Validation check
                if (Object.values(formData).some(value => value === "" || value === null)) {
                    alert("Please fill in all the required fields.");
                    return;
                }
    
                $.ajax({
                    url: '/addExpense',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(formData),
                    success: function (response) {
                        if (response.success) {
                            alert("Expense added successfully!");
                            $('#newUsers').modal('hide');
                            window.location.reload();
                        } else {
                            alert("Error: " + response.message);
                        }
                    },
                    error: function () {
                        alert("An error occurred while submitting the form.");
                    }
                });
            });
    
            // Edit Expense Form Submission
            $('#editForm').submit(function (event) {
                event.preventDefault();
    
                // Collect form data
                const updatedData = {
                    ExpenseID: $("#editExpenseID").val(),
                    Description: $("#edit_description").val(),
                    Amount: $("#edit_amount").val(),
                    DateUsed: $("#edit_dateused").val(),
                    AmountGiven: $("#edit_amountgiven").val(),
                    DateGiven: $("#edit_dategiven").val(),
                    OfficerID: $("#edit_officer").val(),
                    EventID: $("#edit_eventtypeid").val(),
                };
    
                // Debugging: Log the updated data before sending
                console.log("Updating Expense:", updatedData);
    
                $.ajax({
                    url: '/updateExpense',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(updatedData),
                    success: function (response) {
                        if (response.success) {
                            alert("Expense updated successfully!");
                            $('#editUsers').modal('hide');
                            window.location.reload();
                        } else {
                            alert("Error updating expense: " + response.message);
                        }
                    },
                    error: function () {
                        alert("An error occurred while updating the expense.");
                    }
                });
            });
        });

        
    </script>


        <!-- Javascripts -->
        <script src="assets/plugins/jquery/jquery-3.1.0.min.js"></script>
        <script src="assets/plugins/bootstrap/popper.min.js"></script>
        <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
        <script src="assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
        <script src="assets/js/lime.min.js"></script>
        <script src="assets/js/pages/todo.js"></script>
    </body>
</html>





